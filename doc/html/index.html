<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nyxstone: Nyxstone</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nyxstone
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Nyxstone </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> The simple assemble/disassemble framework. Nyxstone was built as an internal software project for our powerful binary rewriter <em>NYX</em>.</p>
<p>With Nyxstone we do not ship our own LLVM patches, but wrap LLVM <code>MC</code> objects in custom types to assemble and disassemble for different architectures.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Building</h1>
<p>Building Nyxstone requires a modern compiler, we currently use <code>clang</code>.</p>
<p>Nyxstone uses the LLVM backend to assemble &amp; disassemble instructions. Since the LLVM backend changes frequently with major releases, we currently only support LLVM major version 15.</p>
<p>When Nyxstone is being built, it first searches the directory supplied by the environment variable <code>$NYXSTONE_LLVM_PREFIX/bin</code> and afterwards the <code>$PATH</code> for <code>llvm-config</code>. When <code>llvm-config</code> is found, Nyxstone checks for both the major version and if LLVM can be statically linked.</p>
<p>There are multiple ways to install LLVM 15 if your package manager does not supply it:</p><ul>
<li>Use an external package manager, like <code>brew</code></li>
<li>Build llvm from source</li>
<li>Ubuntu/Debian only: Use the install script from <a href="https://apt.llvm.org">https://apt.llvm.org</a></li>
</ul>
<p>Also make sure to install any libraries needed by your LLVM version for static linking.</p>
<p>You can build the nyxstone cli (nstone) example program and the small sample program in the <code>examples</code> folder using cmake. Use the following commands: </p><div class="fragment"><div class="line">$ mkdir build</div>
<div class="line">$ cd build</div>
<div class="line">$ cmake ..</div>
<div class="line">$ make</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Using Nyxstone</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
CLI Tool</h2>
<p>The Nyxstone cli tool allows for on-the-fly assembling and disassembling from your command line. </p><div class="fragment"><div class="line">$ cd build &amp;&amp; cmake .. &amp;&amp; make</div>
<div class="line">$ ./nstone --help</div>
<div class="line">Allowed options:</div>
<div class="line">  --help                    Show this message</div>
<div class="line">  --arch arg (=x86_64)      LLVM architecture (triple), for example &quot;x86_64&quot;,</div>
<div class="line">                            &quot;armv8m&quot;, &quot;armv8meb&quot;, &quot;thumbv8&quot;, &quot;aarch64&quot;</div>
<div class="line">  --address arg (=0)        Address</div>
<div class="line"> </div>
<div class="line">Assembling:</div>
<div class="line">  --labels arg              Labels, for example &quot;label0=0x10,label1=0x20&quot;</div>
<div class="line">  -A [ --assemble ] arg     Assembly</div>
<div class="line"> </div>
<div class="line">Assembling:</div>
<div class="line">  -D [ --disassemble ] arg  Byte code in hex, for example: &quot;0203&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
In your project</h2>
<p>Currently, Nyxstone is only in use as a rust library via the rust bindings. If you want to use Nyxstone in your project, see the Makefile for how Nyxstone is build and how to link it into your projects.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Documentation</h1>
<p>The C++ API documentation can be generated by running <code>doxygen</code> in the top level directory. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
